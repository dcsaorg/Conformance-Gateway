<div style="margin-top: 1em">
    @if (!report.errorMessages.length && !report.subReports.length) {
      <div style="margin-left: 1em">
        <span
          class="conformanceStatus"
          [title]="getConformanceStatusTitle(report.status)"
        >{{getConformanceStatusEmoji(report.status)}}</span>
        <span>{{report.title}}</span>
      </div>
    }

    @if (report.errorMessages.length || report.subReports.length) {
      <details [attr.open]="unfoldedLevels > 0 ? '' : null">
        <summary>
            <span
              class="conformanceStatus"
              [title]="getConformanceStatusTitle(report.status)"
            >{{getConformanceStatusEmoji(report.status)}}</span>
           <span>{{report.title}}</span>
        </summary>

        @for (errorMessage of report.errorMessages.sort(); track errorMessage) {
          <div style="margin-left: 2em">
            <span
              class="conformanceStatus"
              title="Non-conformant"
            >ðŸš«</span>
            <span>{{errorMessage}}</span>
          </div>
        }

        <div style="margin-left: 2em">
          @for (subReport of report.subReports; track subReport) {
            <app-report
              [unfoldedLevels]="unfoldedLevels - 1"
              [report]="subReport"
            ></app-report>
          }
        </div>
      </details>
    }
</div>
